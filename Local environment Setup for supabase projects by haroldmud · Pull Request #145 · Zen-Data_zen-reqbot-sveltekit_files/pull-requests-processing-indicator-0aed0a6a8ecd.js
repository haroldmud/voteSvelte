"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["pull-requests-processing-indicator"],{26855:(e,t,n)=>{let r;function i(){if(!r)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return r}function a(){return r?.locale??"en-US"}n.d(t,{Kd:()=>a,dU:()=>i}),function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{r=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},4412:(e,t,n)=>{n.d(t,{C:()=>a,x:()=>i});var r=n(86283);let i=r.n4?.readyState==="interactive"||r.n4?.readyState==="complete"?Promise.resolve():new Promise(e=>{r.n4?.addEventListener("DOMContentLoaded",()=>{e()})}),a=r.n4?.readyState==="complete"?Promise.resolve():new Promise(e=>{r.iG?.addEventListener("load",e)})},46426:(e,t,n)=>{n.d(t,{$:()=>c,c:()=>l});var r=n(15205),i=n(26855),a=n(86283);function o(){let e=(0,i.dU)().featureFlags,t=e.map(e=>e.toUpperCase());return new Set(t)}let s=a.W6?o:(0,r.Z)(o);function l(e){return s().has(e.toUpperCase())}let c={isFeatureEnabled:l}},95253:(e,t,n)=>{let r;n.d(t,{YT:()=>m,qP:()=>f,yM:()=>p});var i=n(88149),a=n(86058),o=n(44544),s=n(71643);let{getItem:l}=(0,o.Z)("localStorage"),c="dimension_",u=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,i.n)("octolytics");delete e.baseContext,r=new a.R(e)}catch(e){}function d(e){let t=(0,i.n)("octolytics").baseContext||{};if(t)for(let[e,n]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=n,delete t[e]);let n=document.querySelector("meta[name=visitor-payload]");if(n){let e=JSON.parse(atob(n.content));Object.assign(t,e)}let r=new URLSearchParams(window.location.search);for(let[e,n]of r)u.includes(e.toLowerCase())&&(t[e]=n);return t.staff=(0,s.B)().toString(),Object.assign(t,e)}function m(e){r?.sendPageView(d(e))}function f(e,t={}){let n=document.head?.querySelector('meta[name="current-catalog-service"]')?.content,i=n?{service:n}:{};for(let[e,n]of Object.entries(t))null!=n&&(i[e]=`${n}`);if(r){let t=e||"unknown";d(i),r.sendEvent(t,d(i))}}function p(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},41011:(e,t,n)=>{var r=n(9067),i=n(85893),a=n(89445),o=n(42483),s=n(65379),l=n(88216),c=n(74121),u=n(97011),d=n(67294),m=n(53664),f=n(34232),p=n(37169),h=n(85529);let g={stale:!1,latest_unsynced_push_to_head_ref_at:null};function y({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[r,s]=(0,d.useState)(g),l=(0,p.Z)(),c=(0,d.useCallback)(async()=>{try{let t=await (0,a.v)(e);if(t.ok){let e=await t.json();l()&&s(e)}}catch(e){l()&&s(g)}},[l,e]);(0,d.useEffect)(()=>{c()},[]);let{stale:u,latest_unsynced_push_to_head_ref_at:m}=r;return(0,i.jsx)(o.Z,{sx:{mt:-2},children:(0,i.jsx)(f.n,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,i.jsx)(_,{pullRequestId:n,repositoryId:t,stale:u,latest_unsynced_push_to_head_ref_at:m})})})}function _({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:r}){let{sendAnalyticsEvent:a}=(0,m.z)();if(!n||!r)return null;let d=new Date,f=new Date(r),p=Math.round(d.getTime()-f.getTime())/1e3;return p<20||p>=86400?null:(a("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:p}),(0,i.jsx)(s.Z,{"aria-label":"Recent push is still being processed, and will show up in a bit",direction:"s",children:(0,i.jsx)(l.r,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",sx:{color:"fg.muted"},trailingVisual:h.LinkExternalIcon,children:(0,i.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",fontWeight:400},children:[(0,i.jsx)(c.Z,{size:"small",sx:{color:"fg.muted"}}),(0,i.jsx)(u.Z,{sx:{color:"fg.muted",fontSize:0,ml:2},children:"Processing updates"})]})})}))}try{y.displayName||(y.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{_.displayName||(_.displayName="PullRequestsProcessingIndicator")}catch{}(0,r.t)("pull-requests-processing-indicator",{Component:y})},9067:(e,t,n)=>{n.d(t,{t:()=>u});var r=n(96843);let i=new r.e;var a=n(85893),o=n(76006),s=n(88003),l=n(32369);let c=class ReactPartialElement extends s.S{async getReactNode(e){var t;let{Component:n}=await (t=this.name,i.getRegistration(t));return(0,a.jsx)(l.S,{partialName:this.name,embeddedData:e,Component:n,wasServerRendered:this.hasSSRContent,ssrError:!!this.ssrError})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function u(e,t){i.register(e,t)}c=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([o.Ih],c)},53729:(e,t,n)=>{n.d(t,{A7:()=>l,ko:()=>s,q1:()=>o});var r=n(15205),i=n(86283);let a=(0,r.Z)(function(){return i.n4?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),o=(0,r.Z)(function(){return i.n4?.head?.querySelector('meta[name="is-private-instance"]')?.content==="true"}),s=(0,r.Z)(function(){return"enterprise"===a()}),l="webpack"},44544:(e,t,n)=>{n.d(t,{Z:()=>o,_:()=>s});var r=n(86283),i=n(71643);let a=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function o(e,t={throwQuotaErrorsOnSet:!1},n=r.iG,o=e=>e,s=e=>e){let l;try{if(!n)throw Error();l=n[e]||new a}catch{l=new a}let{throwQuotaErrorsOnSet:c}=t;function u(e){t.sendCacheStats&&(0,i.b)({incrementKey:e})}function d(e){try{if(l.removeItem(e),t.ttl){let t=`${e}:expiry`;l.removeItem(t)}}catch(e){}}return{getItem:function(e,t=new Date().getTime()){try{let n=l.getItem(e);if(!n)return null;let r=`${e}:expiry`,i=Number(l.getItem(r));if(i&&t>i)return d(e),d(r),u("SAFE_STORAGE_VALUE_EXPIRED"),null;return u("SAFE_STORAGE_VALUE_WITHIN_TTL"),o(n)}catch(e){return null}},setItem:function(e,n,r=new Date().getTime()){try{if(l.setItem(e,s(n)),t.ttl){let n=`${e}:expiry`,i=r+t.ttl;l.setItem(n,i.toString())}}catch(e){if(c&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:d,clear:l.clear,key:l.key,get length(){return l.length}}}function s(e){return o(e,{throwQuotaErrorsOnSet:!1},window,JSON.parse,JSON.stringify)}},86283:(e,t,n)=>{n.d(t,{Qg:()=>r.Qg,W6:()=>r.W6,cF:()=>r.cF,iG:()=>i.iG,n4:()=>i.n4,ssrSafeLocation:()=>i.jX,zu:()=>i.zu});var r=n(35647),i=n(73614)},73614:(e,t,n)=>{n.d(t,{iG:()=>i,jX:()=>o,n4:()=>r,zu:()=>a});let r="undefined"==typeof document?void 0:document,i="undefined"==typeof window?void 0:window,a="undefined"==typeof history?void 0:history,o="undefined"==typeof location?{pathname:"",origin:"",search:"",hash:""}:location},35647:(e,t,n)=>{n.d(t,{Qg:()=>a,W6:()=>i,cF:()=>o});var r=n(73614);let i=void 0===r.n4,a=!i;function o(){return!!i||!!r.n4.querySelector('react-app[data-ssr="true"]')}},71643:(e,t,n)=>{n.d(t,{B:()=>m,b:()=>l});var r=n(86283),i=n(4412),a=n(53729),o=n(46426);let s=[];function l(e,t=!1,n=1){if(!0!==(0,o.c)("BROWSER_STATS_DISABLED")){if(n<0||n>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=new Date().getTime()),e.loggedIn=!!r.n4?.head?.querySelector('meta[name="user-login"]')?.content,e.staff=m(),e.bundler=a.A7,Math.random()<n&&s.push(e),t?d():u()}}let c=null;async function u(){await i.C,null==c&&(c=window.requestIdleCallback(d))}function d(){if(c=null,!s.length)return;let e=r.n4?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(!e)return;let t=function(e){let t=[],n=e.map(e=>JSON.stringify(e));for(;n.length>0;)t.push(function(e){let t=e.shift(),n=[t],r=t.length;for(;e.length>0&&r<=65536;){let t=e[0].length;if(r+t<=65536){let i=e.shift();n.push(i),r+=t}else break}return n}(n));return t}(s);for(let n of t)!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${n.join(",")}] }`);s=[]}function m(){return!!r.n4?.head?.querySelector('meta[name="user-staff"]')?.content}r.n4?.addEventListener("pagehide",d),r.n4?.addEventListener("visibilitychange",d)},53664:(e,t,n)=>{n.d(t,{w:()=>s,z:()=>o});var r=n(67294),i=n(95253),a=n(87487);function o(){let e=(0,r.useContext)(a.f);if(!e)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:t,category:n,metadata:o}=e;return{sendAnalyticsEvent:(0,r.useCallback)((e,r,a={})=>{let s={react:!0,app_name:t,category:n,...o};(0,i.qP)(e,{...s,...a,target:r})},[t,n,o])}}function s(){let{sendAnalyticsEvent:e}=o();return{sendClickAnalyticsEvent:(0,r.useCallback)((t={})=>{e("analytics.click",void 0,t)},[e])}}},89445:(e,t,n)=>{function r(e,t={}){if(e.match(/^(https?:|\/\/)/))throw Error("Can not make cross-origin requests from verifiedFetch");let n={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:n})}function i(e,t){let n=t?.headers??{},i={...n,Accept:"application/json","Content-Type":"application/json"},a=t?.body?JSON.stringify(t.body):void 0;return r(e,{...t,body:a,headers:i})}n.d(t,{Q:()=>r,v:()=>i})},32369:(e,t,n)=>{n.d(t,{S:()=>f});var r=n(85893),i=n(67294),a=n(1343),o=n(12599),s=n(58989),l=n(89250),c=n(78249);function u({children:e,history:t}){let[n,a]=(0,i.useState)({location:t.location});return(0,c.g)(()=>t.listen(a),[t]),(0,r.jsx)(l.F0,{location:n.location,navigator:t,children:e})}try{u.displayName||(u.displayName="PartialRouter")}catch{}var d=n(33011),m=n(59112);function f({partialName:e,embeddedData:t,Component:n,wasServerRendered:l,ssrError:c}){let f=i.useRef(),p=globalThis.window;f.current||(f.current=p?(0,m.l)({window:p}):(0,o.PP)({initialEntries:[{pathname:"/"}]}));let h=f.current;return(0,r.jsx)(a.R,{appName:e,wasServerRendered:l,children:(0,r.jsx)(s.i,{history:h,routes:[],children:(0,r.jsxs)(u,{history:h,children:[(0,r.jsx)(n,{...t.props}),(0,r.jsx)(d.P,{ssrError:c})]})})})}try{f.displayName||(f.displayName="PartialEntry")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","vendors-node_modules_primer_octicons-react_dist_index_esm_js-node_modules_primer_react_lib-es-2e8e7c","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_Spinner_Spinner_js-node_modules_primer_react_lib-es-a08228","ui_packages_react-core_create-browser-history_ts-ui_packages_react-core_deferred-registry_ts--ebbb92"],()=>t(41011)),e.O()}]);
//# sourceMappingURL=pull-requests-processing-indicator-70a876d581cf.js.map